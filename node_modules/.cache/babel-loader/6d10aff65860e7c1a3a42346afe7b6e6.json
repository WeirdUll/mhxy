{"remainingRequest":"/Users/liyulong/项目/备份/mhxy/node_modules/babel-loader/lib/index.js!/Users/liyulong/项目/备份/mhxy/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/liyulong/项目/备份/mhxy/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liyulong/项目/备份/mhxy/src/views/dashboard/admin/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liyulong/项目/备份/mhxy/src/views/dashboard/admin/index.vue","mtime":1692525758199},{"path":"/Users/liyulong/项目/备份/mhxy/babel.config.js","mtime":1638874516000},{"path":"/Users/liyulong/项目/备份/mhxy/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liyulong/项目/备份/mhxy/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/liyulong/项目/备份/mhxy/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liyulong/项目/备份/mhxy/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZ2V0RGV2aWNlTGlzdCwgdXBkYXRlRGV2aWNlTmlja05hbWUsIGJpbmREZXZpY2UgfSBmcm9tICJAL2FwaS9kZXZpY2UiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkRhc2hib2FyZEFkbWluIiwKICBjb21wb25lbnRzOiB7fSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGFibGVEYXRhOiBbXSwKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGRldmljZU51bTogIiIsCiAgICAgIGlucHV0OiAiIiwKICAgICAgaXNFZGl0Tmlja05hbWU6IGZhbHNlLAogICAgICBkZXZpY2VJZDogIiIKICAgIH07CiAgfSwKICB3YXRjaDogewogICAgZGlhbG9nVmlzaWJsZTogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKG5ld3ZhbCwgb2xkdmFsKSB7CiAgICAgICAgaWYgKCFuZXd2YWwpIHsKICAgICAgICAgIHRoaXMuZGV2aWNlTnVtID0gIiI7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5kZXZpY2VMaXN0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBib25kZWREZXZpY2VzOiBmdW5jdGlvbiBib25kZWREZXZpY2VzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgYmluZERldmljZSh7CiAgICAgICAgZGV2aWNlQ29kZTogdGhpcy5kZXZpY2VOdW0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7CgogICAgICAgIF90aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIG1lc3NhZ2U6ICfnu5HlrprmiJDlip8nLAogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgfSk7CgogICAgICAgIF90aGlzLmRldmljZUxpc3QoKTsKICAgICAgfSk7CiAgICB9LAogICAgZWRpdGluZ1JlbW90ZUZpbGVzOiBmdW5jdGlvbiBlZGl0aW5nUmVtb3RlRmlsZXMoaWQsIGRldmljZUlkKSB7CiAgICAgIGNvbnNvbGUubG9nKGlkKTsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICIvZGFzaGJvYXJkL3JlbW90ZS1maWxlcyIsCiAgICAgICAgcXVlcnk6IHsKICAgICAgICAgIGRhdGE6IGlkLAogICAgICAgICAgZGV2aWNlSWQ6IGRldmljZUlkCiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvL+iOt+WPluiuvuWkh+WIl+ihqAogICAgZGV2aWNlTGlzdDogZnVuY3Rpb24gZGV2aWNlTGlzdCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBnZXREZXZpY2VMaXN0KCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczIudGFibGVEYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgYmluZERldmljZTogZnVuY3Rpb24gYmluZERldmljZSgpIHsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICBoYW5kbGVDbG9zZTogZnVuY3Rpb24gaGFuZGxlQ2xvc2UoZG9uZSkgewogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgIH0sCiAgICBtb2RpZnlOaWNrTmFtZTogZnVuY3Rpb24gbW9kaWZ5Tmlja05hbWUodmFsLCBkZXZpY2VJZCkgewogICAgICB0aGlzLmlzRWRpdE5pY2tOYW1lID0gdHJ1ZTsKICAgICAgdGhpcy5kZXZpY2VJZCA9IGRldmljZUlkOwogICAgICB0aGlzLmlucHV0ID0gdmFsOwogICAgfSwKICAgIHJlbmV3Tmlja05hbWU6IGZ1bmN0aW9uIHJlbmV3Tmlja05hbWUoaWQpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB1cGRhdGVEZXZpY2VOaWNrTmFtZSh7CiAgICAgICAgZGV2aWNlSWQ6IGlkLAogICAgICAgIG5pY2tOYW1lOiB0aGlzLmlucHV0CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMzLmlzRWRpdE5pY2tOYW1lID0gZmFsc2U7CgogICAgICAgIF90aGlzMy5kZXZpY2VMaXN0KCk7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EA;AACA;AACAA,wBADA;AAEAC,gBAFA;AAGAC,MAHA,kBAGA;AACA;AACAC,mBADA;AAEAC,0BAFA;AAGAC,mBAHA;AAIAC,eAJA;AAKAC,2BALA;AAMAC;AANA;AAQA,GAZA;AAaAC;AACAL;AACAM;AACA;AACA;AACA;AACA;AALA;AADA,GAbA;AAsBAC,SAtBA,qBAsBA;AACA;AACA,GAxBA;AAyBAC;AACAC,iBADA,2BACA;AAAA;;AACAC;AAAAC;AAAA;AACA;;AACA;AACAC,yBADA;AAEAC;AAFA;;AAIA;AACA,OAPA;AAQA,KAVA;AAWAC,sBAXA,8BAWAC,EAXA,EAWAX,QAXA,EAWA;AACAY;AACA;AACAC,uCADA;AAEAC;AAAApB;AAAAM;AAAA;AAFA;AAIA,KAjBA;AAkBA;AACAe,cAnBA,wBAmBA;AAAA;;AACAC;AACA;AACA,OAFA;AAGA,KAvBA;AAwBAV,cAxBA,wBAwBA;AACA;AACA,KA1BA;AA2BAW,eA3BA,uBA2BAC,IA3BA,EA2BA;AACA;AACA,KA7BA;AA8BAC,kBA9BA,0BA8BAC,GA9BA,EA8BApB,QA9BA,EA8BA;AACA;AACA;AACA;AACA,KAlCA;AAmCAqB,iBAnCA,yBAmCAV,EAnCA,EAmCA;AAAA;;AACAW;AAAAtB;AAAAuB;AAAA,cACA;AACA;;AACA;AACA,OAJA;AAMA;AA1CA;AAzBA","names":["name","components","data","tableData","dialogVisible","deviceNum","input","isEditNickName","deviceId","watch","handler","mounted","methods","bondedDevices","bindDevice","deviceCode","message","type","editingRemoteFiles","id","console","path","query","deviceList","getDeviceList","handleClose","done","modifyNickName","val","renewNickName","updateDeviceNickName","nickName"],"sourceRoot":"src/views/dashboard/admin","sources":["index.vue"],"sourcesContent":["<template>\n  <div class=\"dashboard-editor-container\">\n    <div class=\"tab\">\n      <el-button type=\"primary\" @click.native.prevent=\"bindDevice\"\n        >绑定设备</el-button\n      >\n    </div>\n    <el-table :data=\"tableData\" style=\"width: 100%\">\n      <el-table-column prop=\"deviceId\" label=\"设备号\"> </el-table-column>\n      <el-table-column prop=\"deviceName\" label=\"设备名称\"> </el-table-column>\n      <el-table-column prop=\"taskTips\" label=\"状态\"> </el-table-column>\n      <el-table-column prop=\"lastChannelTime\" label=\"时间\"> </el-table-column>\n      <el-table-column prop=\"ip\" label=\"IP\"> </el-table-column>\n      <el-table-column prop=\"nickName\" label=\"别名\">\n        <template slot-scope=\"scope\">\n          <div class=\"nickName\">\n            <div\n              v-if=\"!(isEditNickName && scope.row.deviceId == deviceId)\"\n              class=\"test\"\n            >\n              {{ scope.row.nickName }}\n            </div>\n            <div\n              v-if=\"isEditNickName && scope.row.deviceId == deviceId\"\n              class=\"input-nickName\"\n            >\n              <el-input\n                v-model=\"input\"\n                placeholder=\"请输入内容\"\n                @blur=\"renewNickName(scope.row.id)\"\n              ></el-input>\n            </div>\n            <div class=\"nickName-button\">\n              <i\n                class=\"el-icon-edit\"\n                @click=\"modifyNickName(scope.row.nickName, scope.row.deviceId)\"\n              ></i>\n            </div>\n          </div>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"address\" label=\"总数(已完成)\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.accountSize }}({{ scope.row.todayFinishSize }})\n        </template>\n      </el-table-column>\n      <!-- <el-table-column prop=\"address\" label=\"版本\"> </el-table-column> -->\n      <el-table-column label=\"操作\">\n        <template slot-scope=\"scope\">\n          <el-button\n            @click.native.prevent=\"\n              editingRemoteFiles(scope.row.id, scope.row.deviceId)\n            \"\n            type=\"text\"\n            size=\"small\"\n          >\n            编辑远程文件\n          </el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-dialog\n      title=\"绑定设备\"\n      :visible.sync=\"dialogVisible\"\n      width=\"30%\"\n      :before-close=\"handleClose\"\n    >\n      <el-input\n        v-model=\"deviceNum\"\n        placeholder=\"请输入设备脚本端提供的code码\"\n      ></el-input>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"bondedDevices\">确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { getDeviceList, updateDeviceNickName, bindDevice } from \"@/api/device\";\nexport default {\n  name: \"DashboardAdmin\",\n  components: {},\n  data() {\n    return {\n      tableData: [],\n      dialogVisible: false,\n      deviceNum: \"\",\n      input: \"\",\n      isEditNickName: false,\n      deviceId: \"\",\n    };\n  },\n  watch: {\n    dialogVisible: {\n      handler: function (newval, oldval) {\n        if (!newval) {\n          this.deviceNum = \"\";\n        }\n      },\n    },\n  },\n  mounted() {\n    this.deviceList();\n  },\n  methods: {\n    bondedDevices() {\n      bindDevice({deviceCode:this.deviceNum}).then((response) => {\n        this.dialogVisible = false;\n        this.$message({\n          message: '绑定成功',\n          type: 'success'\n        });\n        this.deviceList();\n      });\n    },\n    editingRemoteFiles(id, deviceId) {\n      console.log(id);\n      this.$router.push({\n        path: \"/dashboard/remote-files\",\n        query: { data: id, deviceId: deviceId },\n      });\n    },\n    //获取设备列表\n    deviceList() {\n      getDeviceList().then((response) => {\n        this.tableData = response.data;\n      });\n    },\n    bindDevice() {\n      this.dialogVisible = true;\n    },\n    handleClose(done) {\n      this.dialogVisible = false;\n    },\n    modifyNickName(val, deviceId) {\n      this.isEditNickName = true;\n      this.deviceId = deviceId;\n      this.input = val;\n    },\n    renewNickName(id) {\n      updateDeviceNickName({ deviceId: id, nickName: this.input }).then(\n        (response) => {\n          this.isEditNickName = false;\n          this.deviceList();\n        }\n      );\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.tab {\n  padding: 20px 10px;\n  display: flex;\n  justify-content: flex-end;\n}\n.el-table {\n  padding: 0 10px;\n  ::v-deep .el-table__body-wrapper {\n    max-height: calc(100vh - 170px);\n    overflow-y: auto;\n  }\n}\n.nickName {\n  display: flex;\n  .nickName-button {\n    display: flex;\n    align-items: center;\n    cursor: pointer;\n  }\n}\n</style>\n"]}]}