{"remainingRequest":"/Users/liyulong/项目/备份/mhxy/node_modules/babel-loader/lib/index.js!/Users/liyulong/项目/备份/mhxy/node_modules/eslint-loader/index.js??ref--13-0!/Users/liyulong/项目/备份/mhxy/src/store/modules/user.js","dependencies":[{"path":"/Users/liyulong/项目/备份/mhxy/src/store/modules/user.js","mtime":1692432798274},{"path":"/Users/liyulong/项目/备份/mhxy/babel.config.js","mtime":1638874516000},{"path":"/Users/liyulong/项目/备份/mhxy/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liyulong/项目/备份/mhxy/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/liyulong/项目/备份/mhxy/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9saXl1bG9uZy9cdTk4NzlcdTc2RUUvXHU1OTA3XHU0RUZEL21oeHkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0IHsgbG9naW4gYXMgX2xvZ2luLCBsb2dvdXQsIGdldEluZm8gfSBmcm9tICdAL2FwaS91c2VyJzsKaW1wb3J0IHsgZ2V0VG9rZW4sIHNldFRva2VuLCByZW1vdmVUb2tlbiB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7CmltcG9ydCByb3V0ZXIsIHsgcmVzZXRSb3V0ZXIgfSBmcm9tICdAL3JvdXRlcic7CnZhciBzdGF0ZSA9IHsKICB0b2tlbjogZ2V0VG9rZW4oKSwKICBuYW1lOiAnJywKICBhdmF0YXI6ICcnLAogIGludHJvZHVjdGlvbjogJycsCiAgcm9sZXM6IFtdCn07CnZhciBtdXRhdGlvbnMgPSB7CiAgU0VUX1RPS0VOOiBmdW5jdGlvbiBTRVRfVE9LRU4oc3RhdGUsIHRva2VuKSB7CiAgICBzdGF0ZS50b2tlbiA9IHRva2VuOwogIH0sCiAgU0VUX0lOVFJPRFVDVElPTjogZnVuY3Rpb24gU0VUX0lOVFJPRFVDVElPTihzdGF0ZSwgaW50cm9kdWN0aW9uKSB7CiAgICBzdGF0ZS5pbnRyb2R1Y3Rpb24gPSBpbnRyb2R1Y3Rpb247CiAgfSwKICBTRVRfTkFNRTogZnVuY3Rpb24gU0VUX05BTUUoc3RhdGUsIG5hbWUpIHsKICAgIHN0YXRlLm5hbWUgPSBuYW1lOwogIH0sCiAgU0VUX0FWQVRBUjogZnVuY3Rpb24gU0VUX0FWQVRBUihzdGF0ZSwgYXZhdGFyKSB7CiAgICBzdGF0ZS5hdmF0YXIgPSBhdmF0YXI7CiAgfSwKICBTRVRfUk9MRVM6IGZ1bmN0aW9uIFNFVF9ST0xFUyhzdGF0ZSwgcm9sZXMpIHsKICAgIHN0YXRlLnJvbGVzID0gcm9sZXM7CiAgfQp9Owp2YXIgYWN0aW9ucyA9IHsKICAvLyB1c2VyIGxvZ2luCiAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKF9yZWYsIHVzZXJJbmZvKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICAvLyBjb25zdCB7IHVzZXJuYW1lLCBwYXNzd29yZCB9ID0gdXNlckluZm8KICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIF9sb2dpbih7CiAgICAgICAgJ21vYmlsZU51bWJlcic6IHVzZXJJbmZvLnVzZXJuYW1lLAogICAgICAgICJ2ZXJpZmljYXRpb25Db2RlIjogdXNlckluZm8ucGFzc3dvcmQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAvLyBjb25zdCB7IGRhdGEgfSA9IHJlc3BvbnNlCiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCByZXNwb25zZS5kYXRhLnVzZXJUb2tlbik7CiAgICAgICAgc2V0VG9rZW4ocmVzcG9uc2UuZGF0YS51c2VyVG9rZW4pOwogICAgICAgIHJlc29sdmUoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIC8vIGdldCB1c2VyIGluZm8KICBnZXRJbmZvOiBmdW5jdGlvbiBnZXRJbmZvKF9yZWYyKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjIuc3RhdGU7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAvKioKICAgICAgICog6L+Z6YeM6K+35rGC55So5oi35L+h5oGv5ZKM5p2D6ZmQ77yM55uu5YmN5o6l5Y+j5rKh5YGa77yM5Y+q5rOo6YeK5LqG77yMZGF0YeWGmeatuwogICAgICAgKiAqLwogICAgICAvLyB1c2VyLmdldEluZm8oc3RhdGUudG9rZW4pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAvLyBjb25zdCB7CiAgICAgIC8vICAgZGF0YQogICAgICAvLyB9ID0gcmVzcG9uc2UKICAgICAgdmFyIF9kYXRhID0gewogICAgICAgIGRhdGE6IHsKICAgICAgICAgIHJvbGVzOiBbJ2FkbWluJ10sCiAgICAgICAgICBpbnRyb2R1Y3Rpb246ICdBZG1pbmlzdHJhdG9yJywKICAgICAgICAgIGF2YXRhcjogJ2h0dHBzOi8vd3BpbWcud2FsbHN0Y24uY29tL2Y3Nzg3MzhjLWU0ZjgtNDg3MC1iNjM0LTU2NzAzYjRhY2FmZS5naWYnLAogICAgICAgICAgbmFtZTogJ2FkbWluaXN0cmF0b3InCiAgICAgICAgfQogICAgICB9LAogICAgICAgICAgZGF0YSA9IF9kYXRhLmRhdGE7CgogICAgICBpZiAoIWRhdGEpIHsKICAgICAgICByZWplY3QoJ1ZlcmlmaWNhdGlvbiBmYWlsZWQsIHBsZWFzZSBMb2dpbiBhZ2Fpbi4nKTsKICAgICAgfQoKICAgICAgdmFyIHJvbGVzID0gZGF0YS5yb2xlcywKICAgICAgICAgIG5hbWUgPSBkYXRhLm5hbWUsCiAgICAgICAgICBhdmF0YXIgPSBkYXRhLmF2YXRhciwKICAgICAgICAgIGludHJvZHVjdGlvbiA9IGRhdGEuaW50cm9kdWN0aW9uLAogICAgICAgICAgdG9rZW4gPSBkYXRhLnRva2VuOyAvLyByb2xlcyBtdXN0IGJlIGEgbm9uLWVtcHR5IGFycmF5CgogICAgICBpZiAoIXJvbGVzIHx8IHJvbGVzLmxlbmd0aCA8PSAwKSB7CiAgICAgICAgcmVqZWN0KCdnZXRJbmZvOiByb2xlcyBtdXN0IGJlIGEgbm9uLW51bGwgYXJyYXkhJyk7CiAgICAgIH0KCiAgICAgIGNvbW1pdCgnU0VUX1JPTEVTJywgcm9sZXMpOwogICAgICBjb21taXQoJ1NFVF9OQU1FJywgbmFtZSk7CiAgICAgIGNvbW1pdCgnU0VUX0FWQVRBUicsIGF2YXRhcik7CiAgICAgIGNvbW1pdCgnU0VUX0lOVFJPRFVDVElPTicsIGludHJvZHVjdGlvbik7CiAgICAgIGNvbW1pdCgnU0VUX1RPS0VOJywgdG9rZW4pOwogICAgICByZXNvbHZlKGRhdGEpOyAvLyB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgIC8vICAgcmVqZWN0KGVycm9yKQogICAgICAvLyB9KQogICAgfSk7CiAgfSwKICAvLyB1c2VyIGxvZ291dAogIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KF9yZWYzKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0LAogICAgICAgIHN0YXRlID0gX3JlZjMuc3RhdGUsCiAgICAgICAgZGlzcGF0Y2ggPSBfcmVmMy5kaXNwYXRjaDsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIGNvbW1pdCgnU0VUX1RPS0VOJywgJycpOwogICAgICBjb21taXQoJ1NFVF9ST0xFUycsIFtdKTsKICAgICAgcmVtb3ZlVG9rZW4oKTsKICAgICAgcmVzZXRSb3V0ZXIoKTsKICAgICAgZGlzcGF0Y2goJ3RhZ3NWaWV3L2RlbEFsbFZpZXdzJywgbnVsbCwgewogICAgICAgIHJvb3Q6IHRydWUKICAgICAgfSk7CiAgICAgIHJlc29sdmUoKTsgLy8gbG9nb3V0KHN0YXRlLnRva2VuKS50aGVuKCgpID0+IHsKICAgICAgLy8gICBjb21taXQoJ1NFVF9UT0tFTicsICcnKQogICAgICAvLyAgIGNvbW1pdCgnU0VUX1JPTEVTJywgW10pCiAgICAgIC8vICAgcmVtb3ZlVG9rZW4oKQogICAgICAvLyAgIHJlc2V0Um91dGVyKCkKICAgICAgLy8gICAvLyByZXNldCB2aXNpdGVkIHZpZXdzIGFuZCBjYWNoZWQgdmlld3MKICAgICAgLy8gICAvLyB0byBmaXhlZCBodHRwczovL2dpdGh1Yi5jb20vUGFuSmlhQ2hlbi92dWUtZWxlbWVudC1hZG1pbi9pc3N1ZXMvMjQ4NQogICAgICAvLyAgIGRpc3BhdGNoKCd0YWdzVmlldy9kZWxBbGxWaWV3cycsIG51bGwsIHsgcm9vdDogdHJ1ZSB9KQogICAgICAvLyAgIHJlc29sdmUoKQogICAgICAvLyB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgIC8vICAgcmVqZWN0KGVycm9yKQogICAgICAvLyB9KQogICAgfSk7CiAgfSwKICAvLyByZW1vdmUgdG9rZW4KICByZXNldFRva2VuOiBmdW5jdGlvbiByZXNldFRva2VuKF9yZWY0KSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjQuY29tbWl0OwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgIGNvbW1pdCgnU0VUX1RPS0VOJywgJycpOwogICAgICBjb21taXQoJ1NFVF9ST0xFUycsIFtdKTsKICAgICAgcmVtb3ZlVG9rZW4oKTsKICAgICAgcmVzb2x2ZSgpOwogICAgfSk7CiAgfSwKICAvLyBkeW5hbWljYWxseSBtb2RpZnkgcGVybWlzc2lvbnMKICBjaGFuZ2VSb2xlczogZnVuY3Rpb24gY2hhbmdlUm9sZXMoX3JlZjUsIHJvbGUpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBjb21taXQsIGRpc3BhdGNoLCB0b2tlbiwgX3lpZWxkJGRpc3BhdGNoLCByb2xlcywgYWNjZXNzUm91dGVzOwoKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWY1LmNvbW1pdCwgZGlzcGF0Y2ggPSBfcmVmNS5kaXNwYXRjaDsKICAgICAgICAgICAgICB0b2tlbiA9IHJvbGUgKyAnLXRva2VuJzsKICAgICAgICAgICAgICBjb21taXQoJ1NFVF9UT0tFTicsIHRva2VuKTsKICAgICAgICAgICAgICBzZXRUb2tlbih0b2tlbik7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdnZXRJbmZvJyk7CgogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgX3lpZWxkJGRpc3BhdGNoID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICByb2xlcyA9IF95aWVsZCRkaXNwYXRjaC5yb2xlczsKICAgICAgICAgICAgICByZXNldFJvdXRlcigpOyAvLyBnZW5lcmF0ZSBhY2Nlc3NpYmxlIHJvdXRlcyBtYXAgYmFzZWQgb24gcm9sZXMKCiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgncGVybWlzc2lvbi9nZW5lcmF0ZVJvdXRlcycsIHJvbGVzLCB7CiAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIGFjY2Vzc1JvdXRlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgLy8gZHluYW1pY2FsbHkgYWRkIGFjY2Vzc2libGUgcm91dGVzCiAgICAgICAgICAgICAgcm91dGVyLmFkZFJvdXRlcyhhY2Nlc3NSb3V0ZXMpOyAvLyByZXNldCB2aXNpdGVkIHZpZXdzIGFuZCBjYWNoZWQgdmlld3MKCiAgICAgICAgICAgICAgZGlzcGF0Y2goJ3RhZ3NWaWV3L2RlbEFsbFZpZXdzJywgbnVsbCwgewogICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiBzdGF0ZSwKICBtdXRhdGlvbnM6IG11dGF0aW9ucywKICBhY3Rpb25zOiBhY3Rpb25zCn07"},{"version":3,"sources":["/Users/liyulong/项目/备份/mhxy/src/store/modules/user.js"],"names":["login","logout","getInfo","getToken","setToken","removeToken","router","resetRouter","state","token","name","avatar","introduction","roles","mutations","SET_TOKEN","SET_INTRODUCTION","SET_NAME","SET_AVATAR","SET_ROLES","actions","userInfo","commit","Promise","resolve","reject","username","password","then","response","console","log","data","userToken","catch","error","length","dispatch","root","resetToken","changeRoles","role","accessRoutes","addRoutes","namespaced"],"mappings":"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","sourcesContent":["import { login, logout, getInfo } from '@/api/user'\nimport { getToken, setToken, removeToken } from '@/utils/auth'\nimport router, { resetRouter } from '@/router'\n\nconst state = {\n  token: getToken(),\n  name: '',\n  avatar: '',\n  introduction: '',\n  roles: []\n}\n\nconst mutations = {\n  SET_TOKEN: (state, token) => {\n    state.token = token\n  },\n  SET_INTRODUCTION: (state, introduction) => {\n    state.introduction = introduction\n  },\n  SET_NAME: (state, name) => {\n    state.name = name\n  },\n  SET_AVATAR: (state, avatar) => {\n    state.avatar = avatar\n  },\n  SET_ROLES: (state, roles) => {\n    state.roles = roles\n  }\n}\n\nconst actions = {\n  // user login\n  login({ commit }, userInfo) {\n    // const { username, password } = userInfo\n    return new Promise((resolve, reject) => {\n      login({\n        'mobileNumber': userInfo.username,\n        \"verificationCode\": userInfo.password\n    }).then(response => {\n        // const { data } = response\n        console.log(response.data)\n        commit('SET_TOKEN', response.data.userToken)\n        setToken(response.data.userToken)\n        resolve()\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // get user info\n  getInfo({\n    commit,\n    state\n  }) {\n    return new Promise((resolve, reject) => {\n      /**\n       * 这里请求用户信息和权限，目前接口没做，只注释了，data写死\n       * */\n      // user.getInfo(state.token).then(response => {\n      // const {\n      //   data\n      // } = response\n      const {\n        data\n      } = {\n        data: {\n          roles: ['admin'],\n          introduction: 'Administrator',\n          avatar: 'https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif',\n          name: 'administrator'\n        }\n      }\n\n      if (!data) {\n        reject('Verification failed, please Login again.')\n      }\n\n      const {\n        roles,\n        name,\n        avatar,\n        introduction,\n        token\n      } = data\n\n      // roles must be a non-empty array\n      if (!roles || roles.length <= 0) {\n        reject('getInfo: roles must be a non-null array!')\n      }\n\n      commit('SET_ROLES', roles)\n      commit('SET_NAME', name)\n      commit('SET_AVATAR', avatar)\n      commit('SET_INTRODUCTION', introduction)\n      commit('SET_TOKEN', token)\n      resolve(data)\n      // }).catch(error => {\n      //   reject(error)\n      // })\n    })\n  },\n\n\n  // user logout\n  logout({ commit, state, dispatch }) {\n    return new Promise((resolve, reject) => {\n      commit('SET_TOKEN', '')\n        commit('SET_ROLES', [])\n        removeToken()\n        resetRouter()\n        dispatch('tagsView/delAllViews', null, { root: true })\n        resolve()\n      // logout(state.token).then(() => {\n      //   commit('SET_TOKEN', '')\n      //   commit('SET_ROLES', [])\n      //   removeToken()\n      //   resetRouter()\n\n      //   // reset visited views and cached views\n      //   // to fixed https://github.com/PanJiaChen/vue-element-admin/issues/2485\n      //   dispatch('tagsView/delAllViews', null, { root: true })\n\n      //   resolve()\n      // }).catch(error => {\n      //   reject(error)\n      // })\n    })\n  },\n\n  // remove token\n  resetToken({ commit }) {\n    return new Promise(resolve => {\n      commit('SET_TOKEN', '')\n      commit('SET_ROLES', [])\n      removeToken()\n      resolve()\n    })\n  },\n\n  // dynamically modify permissions\n  async changeRoles({ commit, dispatch }, role) {\n    const token = role + '-token'\n\n    commit('SET_TOKEN', token)\n    setToken(token)\n\n    const { roles } = await dispatch('getInfo')\n\n    resetRouter()\n\n    // generate accessible routes map based on roles\n    const accessRoutes = await dispatch('permission/generateRoutes', roles, { root: true })\n    // dynamically add accessible routes\n    router.addRoutes(accessRoutes)\n\n    // reset visited views and cached views\n    dispatch('tagsView/delAllViews', null, { root: true })\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n}\n"]}]}