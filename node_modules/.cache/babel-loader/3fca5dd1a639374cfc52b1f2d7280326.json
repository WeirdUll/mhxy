{"remainingRequest":"/Users/liyulong/项目/cnmh/mhxy/node_modules/babel-loader/lib/index.js!/Users/liyulong/项目/cnmh/mhxy/node_modules/eslint-loader/index.js??ref--13-0!/Users/liyulong/项目/cnmh/mhxy/src/store/modules/user.js","dependencies":[{"path":"/Users/liyulong/项目/cnmh/mhxy/src/store/modules/user.js","mtime":1692432798274},{"path":"/Users/liyulong/项目/cnmh/mhxy/babel.config.js","mtime":1638874516000},{"path":"/Users/liyulong/项目/cnmh/mhxy/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liyulong/项目/cnmh/mhxy/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/liyulong/项目/cnmh/mhxy/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9saXl1bG9uZy9cdTk4NzlcdTc2RUUvY25taC9taHh5L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCB7IGxvZ2luIGFzIF9sb2dpbiwgbG9nb3V0LCBnZXRJbmZvIH0gZnJvbSAnQC9hcGkvdXNlcic7CmltcG9ydCB7IGdldFRva2VuLCBzZXRUb2tlbiwgcmVtb3ZlVG9rZW4gfSBmcm9tICdAL3V0aWxzL2F1dGgnOwppbXBvcnQgcm91dGVyLCB7IHJlc2V0Um91dGVyIH0gZnJvbSAnQC9yb3V0ZXInOwp2YXIgc3RhdGUgPSB7CiAgdG9rZW46IGdldFRva2VuKCksCiAgbmFtZTogJycsCiAgYXZhdGFyOiAnJywKICBpbnRyb2R1Y3Rpb246ICcnLAogIHJvbGVzOiBbXQp9Owp2YXIgbXV0YXRpb25zID0gewogIFNFVF9UT0tFTjogZnVuY3Rpb24gU0VUX1RPS0VOKHN0YXRlLCB0b2tlbikgewogICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICB9LAogIFNFVF9JTlRST0RVQ1RJT046IGZ1bmN0aW9uIFNFVF9JTlRST0RVQ1RJT04oc3RhdGUsIGludHJvZHVjdGlvbikgewogICAgc3RhdGUuaW50cm9kdWN0aW9uID0gaW50cm9kdWN0aW9uOwogIH0sCiAgU0VUX05BTUU6IGZ1bmN0aW9uIFNFVF9OQU1FKHN0YXRlLCBuYW1lKSB7CiAgICBzdGF0ZS5uYW1lID0gbmFtZTsKICB9LAogIFNFVF9BVkFUQVI6IGZ1bmN0aW9uIFNFVF9BVkFUQVIoc3RhdGUsIGF2YXRhcikgewogICAgc3RhdGUuYXZhdGFyID0gYXZhdGFyOwogIH0sCiAgU0VUX1JPTEVTOiBmdW5jdGlvbiBTRVRfUk9MRVMoc3RhdGUsIHJvbGVzKSB7CiAgICBzdGF0ZS5yb2xlcyA9IHJvbGVzOwogIH0KfTsKdmFyIGFjdGlvbnMgPSB7CiAgLy8gdXNlciBsb2dpbgogIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihfcmVmLCB1c2VySW5mbykgewogICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgLy8gY29uc3QgeyB1c2VybmFtZSwgcGFzc3dvcmQgfSA9IHVzZXJJbmZvCiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBfbG9naW4oewogICAgICAgICdtb2JpbGVOdW1iZXInOiB1c2VySW5mby51c2VybmFtZSwKICAgICAgICAidmVyaWZpY2F0aW9uQ29kZSI6IHVzZXJJbmZvLnBhc3N3b3JkCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgLy8gY29uc3QgeyBkYXRhIH0gPSByZXNwb25zZQogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwogICAgICAgIGNvbW1pdCgnU0VUX1RPS0VOJywgcmVzcG9uc2UuZGF0YS51c2VyVG9rZW4pOwogICAgICAgIHNldFRva2VuKHJlc3BvbnNlLmRhdGEudXNlclRva2VuKTsKICAgICAgICByZXNvbHZlKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICAvLyBnZXQgdXNlciBpbmZvCiAgZ2V0SW5mbzogZnVuY3Rpb24gZ2V0SW5mbyhfcmVmMikgewogICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdCwKICAgICAgICBzdGF0ZSA9IF9yZWYyLnN0YXRlOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgLyoqCiAgICAgICAqIOi/memHjOivt+axgueUqOaIt+S/oeaBr+WSjOadg+mZkO+8jOebruWJjeaOpeWPo+ayoeWBmu+8jOWPquazqOmHiuS6hu+8jGRhdGHlhpnmrbsKICAgICAgICogKi8KICAgICAgLy8gdXNlci5nZXRJbmZvKHN0YXRlLnRva2VuKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgLy8gY29uc3QgewogICAgICAvLyAgIGRhdGEKICAgICAgLy8gfSA9IHJlc3BvbnNlCiAgICAgIHZhciBfZGF0YSA9IHsKICAgICAgICBkYXRhOiB7CiAgICAgICAgICByb2xlczogWydhZG1pbiddLAogICAgICAgICAgaW50cm9kdWN0aW9uOiAnQWRtaW5pc3RyYXRvcicsCiAgICAgICAgICBhdmF0YXI6ICdodHRwczovL3dwaW1nLndhbGxzdGNuLmNvbS9mNzc4NzM4Yy1lNGY4LTQ4NzAtYjYzNC01NjcwM2I0YWNhZmUuZ2lmJywKICAgICAgICAgIG5hbWU6ICdhZG1pbmlzdHJhdG9yJwogICAgICAgIH0KICAgICAgfSwKICAgICAgICAgIGRhdGEgPSBfZGF0YS5kYXRhOwoKICAgICAgaWYgKCFkYXRhKSB7CiAgICAgICAgcmVqZWN0KCdWZXJpZmljYXRpb24gZmFpbGVkLCBwbGVhc2UgTG9naW4gYWdhaW4uJyk7CiAgICAgIH0KCiAgICAgIHZhciByb2xlcyA9IGRhdGEucm9sZXMsCiAgICAgICAgICBuYW1lID0gZGF0YS5uYW1lLAogICAgICAgICAgYXZhdGFyID0gZGF0YS5hdmF0YXIsCiAgICAgICAgICBpbnRyb2R1Y3Rpb24gPSBkYXRhLmludHJvZHVjdGlvbiwKICAgICAgICAgIHRva2VuID0gZGF0YS50b2tlbjsgLy8gcm9sZXMgbXVzdCBiZSBhIG5vbi1lbXB0eSBhcnJheQoKICAgICAgaWYgKCFyb2xlcyB8fCByb2xlcy5sZW5ndGggPD0gMCkgewogICAgICAgIHJlamVjdCgnZ2V0SW5mbzogcm9sZXMgbXVzdCBiZSBhIG5vbi1udWxsIGFycmF5IScpOwogICAgICB9CgogICAgICBjb21taXQoJ1NFVF9ST0xFUycsIHJvbGVzKTsKICAgICAgY29tbWl0KCdTRVRfTkFNRScsIG5hbWUpOwogICAgICBjb21taXQoJ1NFVF9BVkFUQVInLCBhdmF0YXIpOwogICAgICBjb21taXQoJ1NFVF9JTlRST0RVQ1RJT04nLCBpbnRyb2R1Y3Rpb24pOwogICAgICBjb21taXQoJ1NFVF9UT0tFTicsIHRva2VuKTsKICAgICAgcmVzb2x2ZShkYXRhKTsgLy8gfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAvLyAgIHJlamVjdChlcnJvcikKICAgICAgLy8gfSkKICAgIH0pOwogIH0sCiAgLy8gdXNlciBsb2dvdXQKICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChfcmVmMykgewogICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdCwKICAgICAgICBzdGF0ZSA9IF9yZWYzLnN0YXRlLAogICAgICAgIGRpc3BhdGNoID0gX3JlZjMuZGlzcGF0Y2g7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBjb21taXQoJ1NFVF9UT0tFTicsICcnKTsKICAgICAgY29tbWl0KCdTRVRfUk9MRVMnLCBbXSk7CiAgICAgIHJlbW92ZVRva2VuKCk7CiAgICAgIHJlc2V0Um91dGVyKCk7CiAgICAgIGRpc3BhdGNoKCd0YWdzVmlldy9kZWxBbGxWaWV3cycsIG51bGwsIHsKICAgICAgICByb290OiB0cnVlCiAgICAgIH0pOwogICAgICByZXNvbHZlKCk7IC8vIGxvZ291dChzdGF0ZS50b2tlbikudGhlbigoKSA9PiB7CiAgICAgIC8vICAgY29tbWl0KCdTRVRfVE9LRU4nLCAnJykKICAgICAgLy8gICBjb21taXQoJ1NFVF9ST0xFUycsIFtdKQogICAgICAvLyAgIHJlbW92ZVRva2VuKCkKICAgICAgLy8gICByZXNldFJvdXRlcigpCiAgICAgIC8vICAgLy8gcmVzZXQgdmlzaXRlZCB2aWV3cyBhbmQgY2FjaGVkIHZpZXdzCiAgICAgIC8vICAgLy8gdG8gZml4ZWQgaHR0cHM6Ly9naXRodWIuY29tL1BhbkppYUNoZW4vdnVlLWVsZW1lbnQtYWRtaW4vaXNzdWVzLzI0ODUKICAgICAgLy8gICBkaXNwYXRjaCgndGFnc1ZpZXcvZGVsQWxsVmlld3MnLCBudWxsLCB7IHJvb3Q6IHRydWUgfSkKICAgICAgLy8gICByZXNvbHZlKCkKICAgICAgLy8gfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAvLyAgIHJlamVjdChlcnJvcikKICAgICAgLy8gfSkKICAgIH0pOwogIH0sCiAgLy8gcmVtb3ZlIHRva2VuCiAgcmVzZXRUb2tlbjogZnVuY3Rpb24gcmVzZXRUb2tlbihfcmVmNCkgewogICAgdmFyIGNvbW1pdCA9IF9yZWY0LmNvbW1pdDsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICBjb21taXQoJ1NFVF9UT0tFTicsICcnKTsKICAgICAgY29tbWl0KCdTRVRfUk9MRVMnLCBbXSk7CiAgICAgIHJlbW92ZVRva2VuKCk7CiAgICAgIHJlc29sdmUoKTsKICAgIH0pOwogIH0sCiAgLy8gZHluYW1pY2FsbHkgbW9kaWZ5IHBlcm1pc3Npb25zCiAgY2hhbmdlUm9sZXM6IGZ1bmN0aW9uIGNoYW5nZVJvbGVzKF9yZWY1LCByb2xlKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgY29tbWl0LCBkaXNwYXRjaCwgdG9rZW4sIF95aWVsZCRkaXNwYXRjaCwgcm9sZXMsIGFjY2Vzc1JvdXRlczsKCiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjb21taXQgPSBfcmVmNS5jb21taXQsIGRpc3BhdGNoID0gX3JlZjUuZGlzcGF0Y2g7CiAgICAgICAgICAgICAgdG9rZW4gPSByb2xlICsgJy10b2tlbic7CiAgICAgICAgICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCB0b2tlbik7CiAgICAgICAgICAgICAgc2V0VG9rZW4odG9rZW4pOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnZ2V0SW5mbycpOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIF95aWVsZCRkaXNwYXRjaCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgcm9sZXMgPSBfeWllbGQkZGlzcGF0Y2gucm9sZXM7CiAgICAgICAgICAgICAgcmVzZXRSb3V0ZXIoKTsgLy8gZ2VuZXJhdGUgYWNjZXNzaWJsZSByb3V0ZXMgbWFwIGJhc2VkIG9uIHJvbGVzCgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMTsKICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ3Blcm1pc3Npb24vZ2VuZXJhdGVSb3V0ZXMnLCByb2xlcywgewogICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBhY2Nlc3NSb3V0ZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIC8vIGR5bmFtaWNhbGx5IGFkZCBhY2Nlc3NpYmxlIHJvdXRlcwogICAgICAgICAgICAgIHJvdXRlci5hZGRSb3V0ZXMoYWNjZXNzUm91dGVzKTsgLy8gcmVzZXQgdmlzaXRlZCB2aWV3cyBhbmQgY2FjaGVkIHZpZXdzCgogICAgICAgICAgICAgIGRpc3BhdGNoKCd0YWdzVmlldy9kZWxBbGxWaWV3cycsIG51bGwsIHsKICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogc3RhdGUsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMsCiAgYWN0aW9uczogYWN0aW9ucwp9Ow=="},{"version":3,"sources":["/Users/liyulong/项目/cnmh/mhxy/src/store/modules/user.js"],"names":["login","logout","getInfo","getToken","setToken","removeToken","router","resetRouter","state","token","name","avatar","introduction","roles","mutations","SET_TOKEN","SET_INTRODUCTION","SET_NAME","SET_AVATAR","SET_ROLES","actions","userInfo","commit","Promise","resolve","reject","username","password","then","response","console","log","data","userToken","catch","error","length","dispatch","root","resetToken","changeRoles","role","accessRoutes","addRoutes","namespaced"],"mappings":"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","sourcesContent":["import { login, logout, getInfo } from '@/api/user'\nimport { getToken, setToken, removeToken } from '@/utils/auth'\nimport router, { resetRouter } from '@/router'\n\nconst state = {\n  token: getToken(),\n  name: '',\n  avatar: '',\n  introduction: '',\n  roles: []\n}\n\nconst mutations = {\n  SET_TOKEN: (state, token) => {\n    state.token = token\n  },\n  SET_INTRODUCTION: (state, introduction) => {\n    state.introduction = introduction\n  },\n  SET_NAME: (state, name) => {\n    state.name = name\n  },\n  SET_AVATAR: (state, avatar) => {\n    state.avatar = avatar\n  },\n  SET_ROLES: (state, roles) => {\n    state.roles = roles\n  }\n}\n\nconst actions = {\n  // user login\n  login({ commit }, userInfo) {\n    // const { username, password } = userInfo\n    return new Promise((resolve, reject) => {\n      login({\n        'mobileNumber': userInfo.username,\n        \"verificationCode\": userInfo.password\n    }).then(response => {\n        // const { data } = response\n        console.log(response.data)\n        commit('SET_TOKEN', response.data.userToken)\n        setToken(response.data.userToken)\n        resolve()\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // get user info\n  getInfo({\n    commit,\n    state\n  }) {\n    return new Promise((resolve, reject) => {\n      /**\n       * 这里请求用户信息和权限，目前接口没做，只注释了，data写死\n       * */\n      // user.getInfo(state.token).then(response => {\n      // const {\n      //   data\n      // } = response\n      const {\n        data\n      } = {\n        data: {\n          roles: ['admin'],\n          introduction: 'Administrator',\n          avatar: 'https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif',\n          name: 'administrator'\n        }\n      }\n\n      if (!data) {\n        reject('Verification failed, please Login again.')\n      }\n\n      const {\n        roles,\n        name,\n        avatar,\n        introduction,\n        token\n      } = data\n\n      // roles must be a non-empty array\n      if (!roles || roles.length <= 0) {\n        reject('getInfo: roles must be a non-null array!')\n      }\n\n      commit('SET_ROLES', roles)\n      commit('SET_NAME', name)\n      commit('SET_AVATAR', avatar)\n      commit('SET_INTRODUCTION', introduction)\n      commit('SET_TOKEN', token)\n      resolve(data)\n      // }).catch(error => {\n      //   reject(error)\n      // })\n    })\n  },\n\n\n  // user logout\n  logout({ commit, state, dispatch }) {\n    return new Promise((resolve, reject) => {\n      commit('SET_TOKEN', '')\n        commit('SET_ROLES', [])\n        removeToken()\n        resetRouter()\n        dispatch('tagsView/delAllViews', null, { root: true })\n        resolve()\n      // logout(state.token).then(() => {\n      //   commit('SET_TOKEN', '')\n      //   commit('SET_ROLES', [])\n      //   removeToken()\n      //   resetRouter()\n\n      //   // reset visited views and cached views\n      //   // to fixed https://github.com/PanJiaChen/vue-element-admin/issues/2485\n      //   dispatch('tagsView/delAllViews', null, { root: true })\n\n      //   resolve()\n      // }).catch(error => {\n      //   reject(error)\n      // })\n    })\n  },\n\n  // remove token\n  resetToken({ commit }) {\n    return new Promise(resolve => {\n      commit('SET_TOKEN', '')\n      commit('SET_ROLES', [])\n      removeToken()\n      resolve()\n    })\n  },\n\n  // dynamically modify permissions\n  async changeRoles({ commit, dispatch }, role) {\n    const token = role + '-token'\n\n    commit('SET_TOKEN', token)\n    setToken(token)\n\n    const { roles } = await dispatch('getInfo')\n\n    resetRouter()\n\n    // generate accessible routes map based on roles\n    const accessRoutes = await dispatch('permission/generateRoutes', roles, { root: true })\n    // dynamically add accessible routes\n    router.addRoutes(accessRoutes)\n\n    // reset visited views and cached views\n    dispatch('tagsView/delAllViews', null, { root: true })\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n}\n"]}]}