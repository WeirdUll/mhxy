{"remainingRequest":"/Users/liyulong/项目/备份/mhxy/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liyulong/项目/备份/mhxy/src/views/dashboard/admin/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liyulong/项目/备份/mhxy/src/views/dashboard/admin/index.vue","mtime":1692525732808},{"path":"/Users/liyulong/项目/备份/mhxy/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liyulong/项目/备份/mhxy/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/liyulong/项目/备份/mhxy/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liyulong/项目/备份/mhxy/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldERldmljZUxpc3QsIHVwZGF0ZURldmljZU5pY2tOYW1lLCBiaW5kRGV2aWNlIH0gZnJvbSAiQC9hcGkvZGV2aWNlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJEYXNoYm9hcmRBZG1pbiIsCiAgY29tcG9uZW50czoge30sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRhYmxlRGF0YTogW10sCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBkZXZpY2VOdW06ICIiLAogICAgICBpbnB1dDogIiIsCiAgICAgIGlzRWRpdE5pY2tOYW1lOiBmYWxzZSwKICAgICAgZGV2aWNlSWQ6ICIiLAogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICBkaWFsb2dWaXNpYmxlOiB7CiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIChuZXd2YWwsIG9sZHZhbCkgewogICAgICAgIGlmICghbmV3dmFsKSB7CiAgICAgICAgICB0aGlzLmRldmljZU51bSA9ICIiOwogICAgICAgIH0KICAgICAgfSwKICAgIH0sCiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5kZXZpY2VMaXN0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBib25kZWREZXZpY2VzKCkgewogICAgICBiaW5kRGV2aWNlKHtkZXZpY2VzQ29kZTp0aGlzLmRldmljZU51bX0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICBtZXNzYWdlOiAn57uR5a6a5oiQ5YqfJywKICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgIH0pOwogICAgICAgIHRoaXMuZGV2aWNlTGlzdCgpOwogICAgICB9KTsKICAgIH0sCiAgICBlZGl0aW5nUmVtb3RlRmlsZXMoaWQsIGRldmljZUlkKSB7CiAgICAgIGNvbnNvbGUubG9nKGlkKTsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICIvZGFzaGJvYXJkL3JlbW90ZS1maWxlcyIsCiAgICAgICAgcXVlcnk6IHsgZGF0YTogaWQsIGRldmljZUlkOiBkZXZpY2VJZCB9LAogICAgICB9KTsKICAgIH0sCiAgICAvL+iOt+WPluiuvuWkh+WIl+ihqAogICAgZGV2aWNlTGlzdCgpIHsKICAgICAgZ2V0RGV2aWNlTGlzdCgpLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgdGhpcy50YWJsZURhdGEgPSByZXNwb25zZS5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICBiaW5kRGV2aWNlKCkgewogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKICAgIGhhbmRsZUNsb3NlKGRvbmUpIHsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICB9LAogICAgbW9kaWZ5Tmlja05hbWUodmFsLCBkZXZpY2VJZCkgewogICAgICB0aGlzLmlzRWRpdE5pY2tOYW1lID0gdHJ1ZTsKICAgICAgdGhpcy5kZXZpY2VJZCA9IGRldmljZUlkOwogICAgICB0aGlzLmlucHV0ID0gdmFsOwogICAgfSwKICAgIHJlbmV3Tmlja05hbWUoaWQpIHsKICAgICAgdXBkYXRlRGV2aWNlTmlja05hbWUoeyBkZXZpY2VJZDogaWQsIG5pY2tOYW1lOiB0aGlzLmlucHV0IH0pLnRoZW4oCiAgICAgICAgKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICB0aGlzLmlzRWRpdE5pY2tOYW1lID0gZmFsc2U7CiAgICAgICAgICB0aGlzLmRldmljZUxpc3QoKTsKICAgICAgICB9CiAgICAgICk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/dashboard/admin","sourcesContent":["<template>\n  <div class=\"dashboard-editor-container\">\n    <div class=\"tab\">\n      <el-button type=\"primary\" @click.native.prevent=\"bindDevice\"\n        >绑定设备</el-button\n      >\n    </div>\n    <el-table :data=\"tableData\" style=\"width: 100%\">\n      <el-table-column prop=\"deviceId\" label=\"设备号\"> </el-table-column>\n      <el-table-column prop=\"deviceName\" label=\"设备名称\"> </el-table-column>\n      <el-table-column prop=\"taskTips\" label=\"状态\"> </el-table-column>\n      <el-table-column prop=\"lastChannelTime\" label=\"时间\"> </el-table-column>\n      <el-table-column prop=\"ip\" label=\"IP\"> </el-table-column>\n      <el-table-column prop=\"nickName\" label=\"别名\">\n        <template slot-scope=\"scope\">\n          <div class=\"nickName\">\n            <div\n              v-if=\"!(isEditNickName && scope.row.deviceId == deviceId)\"\n              class=\"test\"\n            >\n              {{ scope.row.nickName }}\n            </div>\n            <div\n              v-if=\"isEditNickName && scope.row.deviceId == deviceId\"\n              class=\"input-nickName\"\n            >\n              <el-input\n                v-model=\"input\"\n                placeholder=\"请输入内容\"\n                @blur=\"renewNickName(scope.row.id)\"\n              ></el-input>\n            </div>\n            <div class=\"nickName-button\">\n              <i\n                class=\"el-icon-edit\"\n                @click=\"modifyNickName(scope.row.nickName, scope.row.deviceId)\"\n              ></i>\n            </div>\n          </div>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"address\" label=\"总数(已完成)\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.accountSize }}({{ scope.row.todayFinishSize }})\n        </template>\n      </el-table-column>\n      <!-- <el-table-column prop=\"address\" label=\"版本\"> </el-table-column> -->\n      <el-table-column label=\"操作\">\n        <template slot-scope=\"scope\">\n          <el-button\n            @click.native.prevent=\"\n              editingRemoteFiles(scope.row.id, scope.row.deviceId)\n            \"\n            type=\"text\"\n            size=\"small\"\n          >\n            编辑远程文件\n          </el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-dialog\n      title=\"绑定设备\"\n      :visible.sync=\"dialogVisible\"\n      width=\"30%\"\n      :before-close=\"handleClose\"\n    >\n      <el-input\n        v-model=\"deviceNum\"\n        placeholder=\"请输入设备脚本端提供的code码\"\n      ></el-input>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"bondedDevices\">确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { getDeviceList, updateDeviceNickName, bindDevice } from \"@/api/device\";\nexport default {\n  name: \"DashboardAdmin\",\n  components: {},\n  data() {\n    return {\n      tableData: [],\n      dialogVisible: false,\n      deviceNum: \"\",\n      input: \"\",\n      isEditNickName: false,\n      deviceId: \"\",\n    };\n  },\n  watch: {\n    dialogVisible: {\n      handler: function (newval, oldval) {\n        if (!newval) {\n          this.deviceNum = \"\";\n        }\n      },\n    },\n  },\n  mounted() {\n    this.deviceList();\n  },\n  methods: {\n    bondedDevices() {\n      bindDevice({devicesCode:this.deviceNum}).then((response) => {\n        this.dialogVisible = false;\n        this.$message({\n          message: '绑定成功',\n          type: 'success'\n        });\n        this.deviceList();\n      });\n    },\n    editingRemoteFiles(id, deviceId) {\n      console.log(id);\n      this.$router.push({\n        path: \"/dashboard/remote-files\",\n        query: { data: id, deviceId: deviceId },\n      });\n    },\n    //获取设备列表\n    deviceList() {\n      getDeviceList().then((response) => {\n        this.tableData = response.data;\n      });\n    },\n    bindDevice() {\n      this.dialogVisible = true;\n    },\n    handleClose(done) {\n      this.dialogVisible = false;\n    },\n    modifyNickName(val, deviceId) {\n      this.isEditNickName = true;\n      this.deviceId = deviceId;\n      this.input = val;\n    },\n    renewNickName(id) {\n      updateDeviceNickName({ deviceId: id, nickName: this.input }).then(\n        (response) => {\n          this.isEditNickName = false;\n          this.deviceList();\n        }\n      );\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.tab {\n  padding: 20px 10px;\n  display: flex;\n  justify-content: flex-end;\n}\n.el-table {\n  padding: 0 10px;\n  ::v-deep .el-table__body-wrapper {\n    max-height: calc(100vh - 170px);\n    overflow-y: auto;\n  }\n}\n.nickName {\n  display: flex;\n  .nickName-button {\n    display: flex;\n    align-items: center;\n    cursor: pointer;\n  }\n}\n</style>\n"]}]}